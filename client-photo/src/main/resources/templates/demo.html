<!DOCTYPE html>
<head>
    <title>JS Client Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link type="text/css" rel="stylesheet" th:href="@{/webjars/bootstrap/4.1.0/css/bootstrap.min.css}"/>
    <script type="text/javascript" th:src="@{/webjars/jquery/3.0.0/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/webjars/bootstrap/4.1.0/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/public/jso.js}"></script>

    <script type="text/javascript">

	$(document)
			.ready(
					function() {

						// Add configuration for one or more providers.
						jso_configure({
							"photo-config" : {
								client_id : "client",
								redirect_uri : "http://localhost:8081/client/demo",
								authorization : "http://localhost:8080/server/oauth/authorize",
							}
						});

						// Perform a data request
						$
								.oajax({
									url : "http://localhost:8080/server/photos?format=json",
									jso_provider : "photo-config", // Will match the config identifier
									jso_scopes : [ "read" ], // List of scopes (OPTIONAL)
									jso_allowia : true, // Allow user interaction (OPTIONAL, default: false) 
									dataType : 'json',
									success : function(data) {
									debugger;
										console.log({response : data});
										$('#message').text(JSON.stringify(data));
									}
								});

						jso_wipe();

					});

    </script>

</head>
<body>

<div class="container">

    <h1>Client Authentication JS Sample</h1>
    <p>Once you have authenticated and approved the access, some
        JavaScript in this page will render a list of photos from Server
        below:</p>
    <p id="message"/>
</div>

</body>
</html>
